<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Matemasie&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/total.css">
    
    <title>total 주문하기</title>
  </head>
  <body>
    <div id="container">
      <form>
        <fieldset class="menu-select-area pint">
          <br />
          <br />
          <label for="p_vanilla">
            <input type="checkbox" id="p_vanilla" class="checkbox" name="p_vanilla" value="8000" />
            파인트<br>(바닐라)
          </label>
          <label for="p_choco">
            <input type="checkbox" id="p_choco" class="checkbox" name="p_choco" value="8000" />
            파인트<br>(초콜릿)
          </label>
          <label for="p_matcha">
            <input type="checkbox" id="p_matcha" class="checkbox" name="p_matcha" value="8000" />
            파인트<br>(말차)
          </label>
          <label for="p_straw">
            <input type="checkbox" id="p_straw" class="checkbox" name="p_straw" value="8000" />
            파인트<br>(딸기)
          </label>
          <label for="p_cheese">
            <input type="checkbox" id="p_cheese" class="checkbox" name="p_cheese" value="8000" />
            파인트<br>(치즈케이크)
          </label>
          <label for="p_milk">
            <input type="checkbox" id="p_milk" class="checkbox" name="p_milk" value="8000" />
            파인트<br>(생우유)
          </label>
          <label for="p_corn">
            <input type="checkbox" id="p_corn" class="checkbox" name="p_corn" value="8000" />
            파인트<br>(옥수수)
          </label>
          <label for="p_orange">
            <input type="checkbox" id="p_orange" class="checkbox" name="p_orange" value="8000" />
            파인트<br>(오렌지&라즈베리)
          </label>
          <label for="p_apple">
            <input type="checkbox" id="p_apple" class="checkbox" name="p_apple" value="8000" />
            파인트<br>(애플민트)
          </label>
        </fieldset>

      
        <fieldset class="menu-select-area chocobar">
          <br />
          <br />
          <label for="ch_cookie">
            <input type="checkbox" id="ch_cookie" class="checkbox" name="ch_cookie" value="2500" />
            초코바<br>(쿠키앤크림)
          </label>
          <label for="ch_vanilla">
            <input type="checkbox" id="ch_vanilla" class="checkbox" name="ch_vanilla" value="2500" />
            초코바<br>(바닐라)
          </label>
          <label for="ch_choco">
            <input type="checkbox" id=ch_choco" class="checkbox" name="ch_choco" value="2500" />
            초코바<br>(초콜릿)
          </label>
          <label for="ch_matcha">
            <input type="checkbox" id="ch_matcha" class="checkbox" name="ch_matcha" value="2500" />
            초코바<br>(말차)
          </label>
        </fieldset>


        <fieldset class="menu-select-area sand">
          <br />
          <br />
          <label for="sn_corn">
            <input type="checkbox" id="sn_corn" class="checkbox" name="sn_corn" value="2500" />
            샌드<br>(옥수수)
          </label>
          <label for="sn_milk">
            <input type="checkbox" id="sn_milk" class="checkbox" name="sn_milk" value="2500" />
            샌드<br>(생우유)
          </label>
          <label for="sn_choco">
            <input type="checkbox" id=sn_choco" class="checkbox" name="sn_choco" value="2500" />
            샌드<br>(초콜릿)
          </label>
        </fieldset>

        <fieldset class="menu-select-area shake">
          <br />
          <br />
          <label for="sk_mango">
            <input type="checkbox" id="sk_mango" class="checkbox" name="sk_mango" value="2500" />
            쉐이크<br>(망고)
          </label>
          <label for="sk_milk">
            <input type="checkbox" id="sk_milk" class="checkbox" name="sk_milk" value="2500" />
            쉐이크<br>(밀크)
          </label>
        </fieldset>
        <fieldset class="menu-select-area coffee">
          <br />
          <br />
          <label for="lat_cafe">
            <input type="checkbox" id="lat_cafe" class="checkbox" name="lat_cafe" value="2400" />
            카페 라떼
          </label>
          <label for="lat_vanilla">
            <input type="checkbox" id="lat_vanilla" class="checkbox" name="lat_vanilla" value="2400" />
            바닐라 라떼
          </label>
        </fieldset>
        <fieldset class="menu-select-area milk">
          <br />
          <br />
          <label for="mk_choco">
            <input type="checkbox" id="mk_choco" class="checkbox" name="mk_choco" value="1500" />
            초코 우유
          </label>
          <label for="mk_banana">
            <input type="checkbox" id="mk_banana" class="checkbox" name="mk_banana" value="1500" />
            바나나 우유
          </label>
        </fieldset>

        <fieldset class="menu-select-area monaka">
          <br />
          <br />
          <label for="m_choco">
            <input type="checkbox" id="m_choco" class="checkbox" name="m_choco" value="2500" />
            모나카<br>(초콜릿)
          </label>
          <label for="m_milk">
            <input type="checkbox" id="m_milk" class="checkbox" name="m_milk" value="2500" />
            모나카<br>(생우유)
          </label>
          <label for="m_corn">
            <input type="checkbox" id="m_corn" class="checkbox" name="m_corn" value="2500" />
            모나카<br>(옥수수)
          </label>
          <label for="m_redbean">
            <input type="checkbox" id="m_redbean" class="checkbox" name="m_redbean" value="2500" />
            모나카<br>(팥)
          </label>
        </fieldset>
      </form>
    </div>

    <div class="total-container">
      
        <div id="slelectedItem">
          <!-- js출력 -->
        </div>
        <input type="text" id="total" name="total" class="price" />
      
    </div>


    <script>
      let basePrice = 0;
      let price = basePrice;
      const sideMenu = document.querySelectorAll(".checkbox");
      const total = document.querySelector("#total");
      const slelectedItem = document.querySelector("#slelectedItem");
      const selectAll = document.querySelector("#selectAll");
      total.value = `합계 : ${price.toLocaleString()}원`;
      //  개별 체크박스 클릭시 실행
      sideMenu.forEach((checkbox) => {
        // console.log(checkbox);
        checkbox.onclick = function () {
          let itemName = this.parentNode.textContent.trim();
          //   console.log(itemName);
          let itemPrice = parseInt(this.value);
          // console.log(itemPrice);
          if (this.checked) {
            price += itemPrice;
            // console.log(price);
            slelectedItem.innerHTML += `<div class ="sideItem">${itemName} : ${itemPrice.toLocaleString()}원 </div>  `;
          } else {
            price -= itemPrice;
            let sideItem = document.querySelectorAll(".sideItem");
            sideItem.forEach((item) => {
              // console.log(item);
              if (item.textContent.includes(itemName)) {
                item.remove();
              }
            });
          }
          total.value = `합계 : ${price.toLocaleString()}원`;
        };
      });
      // 전체선택 기능
      selectAll.onclick = function () {
        // 선택항목 및 가격 초기화
        // 선택항목 초기화
        slelectedItem.innerHTML = "";
        // 가격 초기화
        price = basePrice;
        // 모든 체크박스의 체크 상태를 먼저 초기화
        sideMenu.forEach((checkbox) => {
          // console.log(checked);
          checkbox.checked = false; //체크 해제
        });
        // 전체 선택 체크박스의 체크된 경우
        if (selectAll.checked) {
          sideMenu.forEach((checkbox) => {
            // console.log(checked);
            checkbox.checked = true; //모든 체크박스를 선택
            checkbox.dispatchEvent(new Event("click")); //클릭이벤 발생
          });
        }

        total.value = `합계 : ${price.toLocaleString()}원`;
      };
    </script>
  </body>
</html>
